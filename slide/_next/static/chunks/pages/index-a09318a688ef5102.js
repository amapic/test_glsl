(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5534)}])},5534:function(e,n,t){"use strict";t.r(n),t.d(n,{TextureScene:function(){return A},default:function(){return P}});var r=t(5893),o=t(5152),a=t.n(o),i=t(9008),l=t.n(i),c=t(9477),s=t(1141),u=t(7294),m=t(7618),p=t(5029);let v=new c.Vector3;function f(e,n,t,r,o,a){let i=2*Math.PI*o/4,l=Math.max(a-2*o,0);v.copy(n),v[r]=0,v.normalize();let c=.5*i/(i+l),s=1-v.angleTo(e)/(Math.PI/4);return 1===Math.sign(v[t])?s*c:l/(i+l)+c+c*(1-s)}class d extends c.BoxGeometry{constructor(e=1,n=1,t=1,r=2,o=.1){if(r=2*r+1,o=Math.min(e/2,n/2,t/2,o),super(1,1,1,r,r,r),1===r)return;let a=this.toNonIndexed();this.index=null,this.attributes.position=a.attributes.position,this.attributes.normal=a.attributes.normal,this.attributes.uv=a.attributes.uv;let i=new c.Vector3,l=new c.Vector3,s=new c.Vector3(e,n,t).divideScalar(2).subScalar(o),u=this.attributes.position.array,m=this.attributes.normal.array,p=this.attributes.uv.array,v=u.length/6,d=new c.Vector3,g=.5/r;for(let r=0,a=0;r<u.length;r+=3,a+=2){i.fromArray(u,r),l.copy(i),l.x-=Math.sign(l.x)*g,l.y-=Math.sign(l.y)*g,l.z-=Math.sign(l.z)*g,l.normalize(),u[r+0]=s.x*Math.sign(i.x)+l.x*o,u[r+1]=s.y*Math.sign(i.y)+l.y*o,u[r+2]=s.z*Math.sign(i.z)+l.z*o,m[r+0]=l.x,m[r+1]=l.y,m[r+2]=l.z;let c=Math.floor(r/v);switch(c){case 0:d.set(1,0,0),p[a+0]=f(d,l,"z","y",o,t),p[a+1]=1-f(d,l,"y","z",o,n);break;case 1:d.set(-1,0,0),p[a+0]=1-f(d,l,"z","y",o,t),p[a+1]=1-f(d,l,"y","z",o,n);break;case 2:d.set(0,1,0),p[a+0]=1-f(d,l,"x","z",o,e),p[a+1]=f(d,l,"z","x",o,t);break;case 3:d.set(0,-1,0),p[a+0]=1-f(d,l,"x","z",o,e),p[a+1]=1-f(d,l,"z","x",o,t);break;case 4:d.set(0,0,1),p[a+0]=1-f(d,l,"x","y",o,e),p[a+1]=1-f(d,l,"y","x",o,n);break;case 5:d.set(0,0,-1),p[a+0]=f(d,l,"x","y",o,e),p[a+1]=1-f(d,l,"y","x",o,n)}}}}var g=t(1852),x=t(2729),h=t(3224),y=t(1312);function M(){let e=(0,x._)(["\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  "]);return M=function(){return e},e}function w(){let e=(0,x._)(["\n    precision mediump float;\n    uniform float uTime;\n    uniform sampler2D uTexture;\n    // uniform sampler2D map2;\n    uniform sampler2D uAlphaMap;\n    uniform sampler2D map;\n\n    // uniform sampler2D image3;\n    // uniform sampler2D image1;\n\n    uniform vec3 uColor;\n    uniform bool fond;\n    uniform float camera_x;\n    uniform int compteurCycle;\n    uniform bool filigrane;\n    varying vec2 vUv;\n    uniform vec2 _resolution;\n    \n    float A;\n    \n    float nEcran=1.;\n\n    float Reste;\n\n   \n\n    #define PI 3.1415926538\n\n    vec2 SineWave( vec2 p, float A ){\n      float pi = 3.14159;\n      // float A = 0.50;\n      float w = 20.0 * pi;\n      float t = 30.0*pi/180.0;\n      float y = sin( w*p.x + t) * A; \n      return vec2(p.x, p.y+y);\n   }\n\n   vec4 getFromColor(vec2 uvloc){\n    \n    vec4 ttt = texture2D(uTexture, uvloc);\n    return ttt;\n  }\n\n  vec4 getToColor(vec2 uvloc){\n      vec2 uvloc2=vUv;\n      uvloc2.x=vUv.x* 0.3;\n      vec4 ttt = texture2D(uTexture, uvloc2);\n      return ttt;\n  }\n\n  // vec4 getFromColor2(vec2 uvloc){\n    \n  //   vec4 ttt = texture2D(image3, uvloc);\n  //   return ttt;\n  // }\n\n  // vec4 getToColor2(vec2 uvloc){\n  //     vec2 uvloc2=vUv;\n  //     // uvloc2.x=vUv.x* 0.3;\n  //     vec4 ttt = texture2D(image1, uvloc2);\n  //     return ttt;\n  // }\n\n  // vec4 transition2(vec2 uv,float progress) {\n  //   vec2 center = vec2(0, 0);\n  //   float dots = 20.0;\n  //   vec2 uvbis=uv;\n  //   bool nextImage = distance(fract(uv * dots), vec2(0.5, 0.5)) < ( progress / distance(uv, center));\n  //   return nextImage ? getToColor(uvbis) : getFromColor(uv);\n  // }\n\n  // vec4 transition3(vec2 p,float progress) {\n  //   float strength=0.5;\n  //   vec4 ca = getFromColor(p);\n  //   vec4 cb = getToColor(p);\n    \n  //   vec2 oa = (((ca.rg+ca.b)*0.5)*2.0-1.0);\n  //   vec2 ob = (((cb.rg+cb.b)*0.5)*2.0-1.0);\n  //   vec2 oc = mix(oa,ob,0.5)*strength;\n    \n  //   float w0 = progress;\n  //   float w1 = 1.0-w0;\n  //   return mix(getFromColor2(p+oc*w0), getToColor2(p-oc*w1), progress);\n  // }\n\n  // vec4 transition4(vec2 p,float progress) {\n  //   float size= 0.04;\n  //   float zoom= 50.0;\n  //   float colorSeparation= 0.3;\n  //   float inv = 1. - progress;\n  //   vec2 disp = size*vec2(cos(zoom*p.x), sin(zoom*p.y));\n  //   vec4 texTo = getToColor(p + inv*disp);\n  //   vec4 texFrom = vec4(\n  //     getFromColor(p + progress*disp*(1.0 - colorSeparation)).r,\n  //     getFromColor(p + progress*disp).g,\n  //     getFromColor(p + progress*disp*(1.0 + colorSeparation)).b,\n  //     1.0);\n  //   return texTo*progress + texFrom*inv;\n  // }\n\n  float rand (vec2 co) {\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n  }\n  \n  vec4 transitionCarreau(vec2 p,float progress) {\n    ivec2 size= ivec2(10, 10);\n    float smoothness= 0.5;\n    float r = rand(floor(vec2(size) * p));\n    float m = smoothstep(0.0, -smoothness, r - (progress * (1.0 + smoothness)));\n    return mix(getFromColor(p), getToColor(p), m);\n  }\n  \n\n\n    void main() {\n      vec2 uv;\n\n      vec2 uv3=uv;\n      \n      uv.y=vUv.y;\n\n      Reste=uTime - 10. * floor(uTime/10.);\n\n      float dim_image;\n      float dim_image1=994.;\n      float dim_image2=1080.;\n      float dim_image3=960.;\n      dim_image1=26.29;\n      dim_image2=28.59;\n      dim_image3=35.18;\n      dim_image=(dim_image1 + dim_image2 + dim_image3 );\n\n      // float compteurCycle_old;\n      // float uTime_old;\n      float compteurCycle2=1.;\n\n      // if ((uTime - 10. * floor(uTime/10.)) < (uTime_old - 10. * floor(uTime_old/10.)){\n      //  int i_int = int(floor(uTime/10.));\n      // res = i_float2 / 15.0;\n      // compteurCycle2=i_int + 1;\n\n      compteurCycle2=floor((uTime)/10.)+1.;\n\n      while (compteurCycle2-3.>0.){\n        compteurCycle2=compteurCycle2-3.;\n      }\n      \n      // if (compteurCycle2 - 3. * floor(compteurCycle2/3.)  ==0.){\n      //   compteurCycle2=3.;\n      // }\n      // else if (compteurCycle2 - 2. * floor(compteurCycle2/2.)  ==0.){\n      //   compteurCycle2=2.;\n      // }\n      // else{\n      //   compteurCycle2=1.;\n      // }\n\n      // if (compteuCycle2 > 3){\n        // compteuCycle2=1;\n      // }\n      // }\n      \n      // ) !=\n      //   Math.floor((state.clock.getElapsedTime() - delta) / 10))\n\n      \n     // on se cale sur chaque image\n      if (compteurCycle2==1. ){\n        uv.x=vUv.x * 0.3  ;\n      }\n      else if (compteurCycle2==2.){\n        uv.x=vUv.x * 0.3 + (dim_image1) / dim_image;\n      }\n      else if (compteurCycle2==3.){\n        uv.x=vUv.x * 0.3 + (dim_image1 + dim_image2) / dim_image;\n      }\n\n      \n\n      \n\n\n    if ( Reste > 7. && compteurCycle2!=3.){\n      \n      A=0.;\n      \n      A=0.5 * sin(PI* (Reste-7.) / 3.);\n    \n      uv = SineWave( uv,A ); \n\n      if (compteurCycle2==1.) {\n          \n          uv.x=uv.x+(Reste - 7. ) * (dim_image1) / (3. * dim_image);\n      }\n      else if(compteurCycle2==2.){\n        uv.x=uv.x+(Reste - 7. ) * (dim_image2) / (3. * dim_image);\n      }\n      // else{\n          // uv.x=uv.x -(Reste - 7. ) *.666/3.;\n        \n      // }\n     \n    }\n\n    float t2=0.;\n    float coeff_a=1.;\n\n    vec3 ttt = texture2D(uTexture, uv).rgb;\n    \n    //defining alpha\n\n    t2=0.;\n\n    // if (compteurCycle2!=4.){\n      float alpha=1.;\n      if (((vUv.x - .5) * (vUv.x - .5) + (vUv.y - .5)*(vUv.y - .5)) <.2){\n        alpha=0.;\n      }\n      //we define a circle of transparency at the center\n      float d = sqrt(dot(vUv - vec2(.5,.5),vUv - vec2(.5,.5)));\n      t2 = smoothstep(.3, .3+0.1, d);\n      if (fond==true){\n        t2=0.;\n      }\n      alpha=smoothstep(0.,1.,(vUv.x - .5) * (vUv.x - .5) + (vUv.y - .5)*(vUv.y - .5));\n    // }else{\n      // vec3 aa = texture2D(uAlphaMap, uv).rgb;\n      // t2=(aa.r +  aa.g + aa.b ) /3.;\n    // }\n\n    \n    \n    // vec2 p = gl_FragCoord.xy / _resolution.xy ;\n\n    if (Reste > 7. && compteurCycle2==3.){\n      float progress=uTime - 3. * floor(uTime/3.);\n\n      vec4 aa=transitionCarreau(uv,progress / 2.);\n      if (filigrane){\n        t2=(aa.r +  aa.g + aa.b ) /6.;\n      }\n      gl_FragColor =vec4(aa.rgb,t2);\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n    }\n    else{\n      if (filigrane){\n        t2=(ttt.r +  ttt.g + ttt.b ) /6.;\n      }\n      gl_FragColor = vec4(ttt, t2 );\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n    }\n\n    \n\n    \n\n\n    }\n  "]);return w=function(){return e},e}let _=(0,y.g)({uTime:0,uTexture:new c.Texture,uAlphaMap:new c.Texture,fond:!1,camera_x:0,compteurCycle:1,filigrane:!1,_resolution:new c.Vector2},(0,h.ID)(M()),(0,h.ID)(w()));var C=t(2959),b=t(9542),j=t(1133);function T(e){let{position:n,camera_x:t}=e,o=(0,u.useRef)(),a=(0,u.useRef)({x:0,y:0}),i=(0,u.useRef)({x:0,y:0}),l=(0,u.useRef)(1),s=(0,u.useRef)(),p=(0,u.useRef)(),v=(0,u.useRef)(),f=(0,u.useRef)(),d=[s,p,v,f];(0,m.z)(e=>e.viewport);let g=(0,u.useRef)(0);(0,m.A)(e=>{let{clock:n,camera:t}=e;a.current.x=-(0,b.t7)(i.current.y,0,.3),a.current.y=-(0,b.t7)(i.current.x,0,.3),o.current.rotation.x=-(.1*a.current.x),o.current.rotation.y=-(.1*a.current.y)}),(0,u.useEffect)(()=>{window.addEventListener("mousemove",e=>{i.current.x=(0,b.t7)(i.current.x,e.clientX/window.screen.width,.3),i.current.y=(0,b.t7)(i.current.y,e.clientY/window.screen.height,.3)});for(let e=0;e<d.length;e++)d[e].current.material.resolution=window.innerHeight/window.innerWidth}),(0,m.A)((e,n)=>{g.current+=n;for(let n=0;n<d.length;n++)d[n].current.material.uTime=e.clock.getElapsedTime();if(0==p.current.material.compteurCycle)for(let e=0;e<d.length;e++)d[e].current.material.compteurCycle=l.current;p.current.position.z=8+1*Math.sin(2*Math.PI*e.clock.getElapsedTime()/10),v.current.position.z=12+1*Math.sin(2*Math.PI*e.clock.getElapsedTime()/10),f.current.position.z=12.1+1*Math.sin(2*Math.PI*e.clock.getElapsedTime()/10),e.camera.position.y=5*Math.sin(2*Math.PI*e.clock.getElapsedTime()/20),e.camera.lookAt(0,5*Math.sin(2*Math.PI*e.clock.getElapsedTime()/20),0)});let x=(0,m.D)(c.TextureLoader,"/slide/concat9.avif");x.colorSpace=c.SRGBColorSpace;let h=(0,m.D)(c.TextureLoader,"/slide/mask5.avif");return h.colorSpace=c.SRGBColorSpace,(0,r.jsxs)("group",{position:n,ref:o,children:[(0,r.jsx)(j.wI,{allowSleep:!1,gravity:[0,0,0],children:(0,r.jsx)(k,{})}),(0,r.jsxs)("mesh",{ref:s,position:[0,0,4],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:x,uTexture:x,fond:!0,toneMapped:!1,camera_x:t,compteurCycle:l.current,color:"black",filigrane:!1,_resolution:0})]}),(0,r.jsxs)("mesh",{ref:p,position:[0,0,8],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:x,uTexture:x,transparent:!0,fond:!1,toneMapped:!1,camera_x:t,compteurCycle:l.current,filigrane:!1,color:"black",_resolution:0})]}),(0,r.jsxs)("mesh",{ref:v,position:[0,0,12],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:x,uTexture:x,transparent:!0,fond:!1,toneMapped:!1,camera_x:t,compteurCycle:l.current,filigrane:!1,color:"black",_resolution:0})]}),(0,r.jsxs)("mesh",{ref:f,position:[0,0,12.1],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:x,uTexture:x,transparent:!0,fond:!1,toneMapped:!1,camera_x:t,compteurCycle:l.current,filigrane:!0,color:"black",_resolution:0})]})]})}function k(){(0,u.useRef)(0);let e=(0,u.useRef)(0),n=(0,u.useRef)(),t=(0,u.useRef)(1),o=(0,u.useRef)({y:0});return(0,m.A)((r,a)=>{n.current.position.y=(0,b.t7)(n.current.position.y,o.current.y,.3),e.current+=a,Math.floor(e.current/10)!=Math.floor((e.current-a)/10)&&(3==t.current?t.current=1:t.current+=1),3==t.current?n.current.outlineColor="black":n.current.outlineColor="green"}),(0,u.useEffect)(()=>{window.addEventListener("wheel",e=>{o.current.y+=e.deltaY/100})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(C.x,{ref:n,scale:[3,3,3],anchorX:"center",anchorY:"middle",color:"white",toneMapped:!1,position:[0,15,13.2],font:"/slide/Roboto-Regular.ttf",outlineWidth:"1%",children:"Site r\xe9alis\xe9 avec Three.js et WebGL"})})}function z(){(0,u.useMemo)(()=>({progress:{value:0,min:0,max:1,step:.1},z:{value:10,min:0,max:20,step:1},maxpolarangle:{value:.85,min:0,max:1,step:.01},x:{value:0,min:0,max:50,step:10}}),[]);let e=Date.now(),n=(0,g.useMediaQuery)({query:"(max-width: 1224px)"});return(0,u.useEffect)(()=>{}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Book A.PICHAT"}),(0,r.jsx)("link",{rel:"shortcut icon",href:"/slide/favicon.ico"})]}),!n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{id:"menu",className:"flex flex-col space-y-1 justify-center fixed top-2 right-2 bg-white rounded-full px-2 m-1 z-50 cursor-pointer",style:{height:"32px",width:"32px"},children:[(0,r.jsx)("div",{className:"w-full bg-black",style:{height:"2px"}}),(0,r.jsx)("div",{style:{height:"2px"},className:"w-full bg-black"}),(0,r.jsx)("div",{style:{height:"2px"},className:"w-full bg-black"})]}),(0,r.jsx)("div",{id:"div_canvas",style:{background:"black",height:"100vh",width:"100vw",position:"fixed"},children:(0,r.jsx)(p.Xz,{gl:{antialias:!0},camera:{near:.1,far:2e4,zoom:1,position:[0,0,20],maxPolarAngle:.85},children:(0,r.jsx)(u.Suspense,{fallback:(0,r.jsx)(R,{}),children:(0,r.jsx)(A,{start:e})})})}),(0,r.jsx)("div",{className:"wrapGreybar",children:(0,r.jsx)("div",{className:"greybar"})})]}),n&&(0,r.jsx)("div",{style:{backgroundColor:"white",height:"100vh",width:"100wh",color:"black",textAlign:"center",lineHeight:"100vh"},children:(0,r.jsx)("span",{style:{display:"inline-block",verticalAlign:"middle",lineHeight:"normal"},children:"Site non optimis\xe9 pour Smartphone. Merci de revenir consulter cette page sur PC !"})})]})}(0,m.e)({WaveShaderMaterial:_}),(0,m.e)({RoundedBoxGeometry:d});let R=e=>{let{start:n}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.V,{center:!0,className:"loading",children:"Loading..."})})};function A(e){var n;let{start:t}=e,o=(0,u.useRef)();function a(){for(var e=0,n=0;n<6;n+=1)e+=Math.random();return e/6}return(0,m.A)(e=>{n=e.camera.position.x}),(0,u.useEffect)(()=>{let e=Date.now()-t;console.log("seconds elapsed = ".concat(e/1e3))},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ambientLight",{intensity:1}),(0,r.jsx)("spotLight",{position:[10,10,10],angle:45,penumbra:0}),(0,r.jsx)(T,{position:[0,0,-20],camera_x:n}),[void 0,void 0,void 0].map((e,n)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(S,{ref:o,rotation:[Math.PI*a(),Math.PI*a(),0]},Math.random())}))]})}let S=(0,u.forwardRef)((e,n)=>{let t,o,a,i,{rotation:l,position:s}=e,p=(0,u.useRef)(),v=[],f=.1*(1+2*Math.random()),d=1+5*Math.random(),g=Math.PI*Math.random()/4,x=[25*Math.random(),25*Math.random(),25*Math.random()];return(0,u.useLayoutEffect)(()=>{g=Math.PI*Math.random()/4,a=[x[0]+50*Math.cos(g),x[1]+50*Math.sin(g),0],i=[x[0]+100*Math.cos(g)*d,x[1]+100*Math.sin(g)*d,0],o=((t=[a[0]-i[0],a[1]-i[1],a[2]-i[2]])[0]+t[1]+t[2])/3,t[0]=f*(t[0]/o),t[1]=f*(t[1]/o),t[2]=f*(t[2]/o),v=[new c.Vector3(i[0],i[1],i[2]),new c.Vector3(a[0],a[1],a[2])],p.current&&(p.current.geometry.setFromPoints(v),p.current.rotation.z=Math.PI*[2*Math.random()-1]/4)},[]),(0,m.A)(()=>{p.current&&p.current.geometry.translate(-t[0],-t[1],-t[2])}),(0,r.jsxs)("line",{ref:p,children:[(0,r.jsx)("bufferGeometry",{attach:"geometry"}),(0,r.jsx)("lineBasicMaterial",{linewidth:"10.0",color:"white"})]},Math.random())});var P=a()(()=>Promise.resolve(z),{ssr:!1})}},function(e){e.O(0,[737,623,776,774,888,179],function(){return e(e.s=5728)}),_N_E=e.O()}]);